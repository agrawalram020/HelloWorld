pipeline {
    agent any

    
    stages {
        stage('Ok') {
            steps {
                echo "Ok"
                
            }
        }
        
        stage('wait'){
            steps {

               script{
                def toJson = {
                        input ->
                        groovy.json.JsonOutput.toJson(input)
                         }
            def body = [
                displayName: [
                    text: "smoke test"],
                description: [
                    text: "${dir_name}"],
                genusTypeId: "type"
            ]
response = httpRequest consoleLogResponseBody: true, contentType: 'APPLICATION_JSON', httpMode: 'POST', requestBody: toJson(body), url: "http://127.0.0.1:8000/cwdname", validResponseCodes: '200'
                  }
                }
        }
        
        
                stage('send mail') {
            steps {
                    
                    emailext body: 'jfldsfjdlsfjdslfjdslf', subject: 'from extended email demo', to: 'agrawalram020@gmail.com'

            }
        }
    }
}
